(function(t){function e(e){for(var s,o,r=e[0],l=e[1],c=e[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);h&&h(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,r=1;r<i.length;r++){var l=i[r];0!==a[l]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var s={},a={app:0},n=[];function o(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=s,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var h=l;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0837":function(t,e,i){},"084a":function(t,e,i){},"0956":function(t,e,i){},1:function(t,e){},"1ea4":function(t,e,i){"use strict";var s=i("5647"),a=i.n(s);a.a},2:function(t,e){},"25a9":function(t,e,i){},"262b":function(t,e,i){"use strict";var s=i("3a75"),a=i.n(s);a.a},2906:function(t,e,i){"use strict";var s=i("25a9"),a=i.n(s);a.a},"31b6":function(t,e,i){},"33a4":function(t,e,i){},"34f5":function(t,e,i){"use strict";var s=i("8373"),a=i.n(s);a.a},"362f":function(t,e,i){},3787:function(t,e,i){"use strict";var s=i("d5a8"),a=i.n(s);a.a},"3a50":function(t,e,i){"use strict";var s=i("6bd5"),a=i.n(s);a.a},"3a75":function(t,e,i){},"3b07":function(t,e,i){"use strict";var s=i("084a"),a=i.n(s);a.a},"40e1":function(t,e,i){"use strict";var s=i("ca8d"),a=i.n(s);a.a},"4a4e":function(t,e,i){"use strict";var s=i("99a6"),a=i.n(s);a.a},"50a0":function(t,e,i){"use strict";var s=i("e15e"),a=i.n(s);a.a},"50fe":function(t,e,i){"use strict";var s=i("362f"),a=i.n(s);a.a},"511a":function(t,e,i){"use strict";var s=i("51c7"),a=i.n(s);a.a},"51c6":function(t,e,i){"use strict";var s=i("6f7f"),a=i.n(s);a.a},"51c7":function(t,e,i){},5647:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var s=i("a026"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"center",attrs:{id:"app"}},["intro"==t.page?i("page-intro",{on:{new_file_selected:function(e){t.page="tabs"},open_tab:function(e){t.page="tabs"}}}):t._e(),"tabs"==t.page?i("tabs",{on:{all_tabs_closed:function(e){t.page="intro"},cancelled:function(e){t.page="intro"}}}):t._e()],1)},n=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"page_intro"}},[i("ui-icon-text",{attrs:{icon:"file",text:"New File",hl:"text"},on:{click:function(e){return t.$emit("new_file_selected")}}}),i("ui-icon-text",{attrs:{icon:"folder",text:"New Project",hl:"text"},on:{click:function(e){return t.$emit("new_proj_selected")}}}),i("ui-icon-text",{attrs:{icon:"folder-open",text:"Open File / Project",hl:"text"},on:{click:t.on_open}})],1)},r=[],l=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("bd86")),c=i("3b8d"),h=i("2f62"),u=i("22a2"),p=i("3e8f"),d=i("df7c"),f=i("484a");function _(t){var e=new Promise((function(e,i){var s,a,n,o=new f(t);s=o.width,a=o.height,o.decode((function(t){n=t,e({w:s,h:a,data:n})}))}));return e}function m(t){switch(d.extname(t)){case".png":var e=p.readFileSync(t);return _(e)}}function v(t,e,i,s,a){var n=void 0===t,o=n?new u["c"]:t;n||t.clear();var r=Math.round(e/s),l=Math.round(i/a);o.position.set(0,0),o.lineStyle(1,16777215);for(var c=1;c<r;c++)o.moveTo(s*c,0).lineTo(s*c,i+1);for(var h=1;h<l;h++)o.moveTo(0,a*h).lineTo(e+1,a*h);if(o.alpha=.15,n)return o}function b(t,e,i){var s=void 0===t,a=s?new u["c"]:t;if(s&&t.clear(),a.clear(),a.lineStyle(4,0),a.beginFill(16777215,0),a.drawRect(0,0,e,i),a.lineStyle(2,6068694),a.beginFill(16777215,0),a.drawRect(0,0,e,i),a.endFill(),s)return a}i("63d9");function g(t){for(var e=t.length,i=new Float32Array(e),s=0;s<e;s++)i[s]=t[s]/255;return i}function x(t,e,i){return Math.min(Math.max(t,e),i)}function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var O=i("3e8f"),C=(i("df7c"),i("bdb9").remote.dialog);function k(t){return j.apply(this,arguments)}function j(){return j=Object(c["a"])(regeneratorRuntime.mark((function t(e){var i,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=JSON.parse(O.readFileSync(e,"utf8")),t.next=3,m(i.fpath);case 3:return s=t.sent,s.w,s.h,a=s.data,i.im_data=g(a),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)}))),j.apply(this,arguments)}var $={name:"page-intro",computed:y({},Object(h["c"])(["tabs"])),methods:y(y({},Object(h["b"])(["push"])),{},{on_open:function(){var t=this;C.showOpenDialog({}).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(i){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=i.canceled,a=i.filePaths,s){e.next=7;break}return e.next=4,k(a[0]);case 4:n=e.sent,t.push([t.tabs,{name:"Untitled",type:n.type,data:n}]),t.$emit("open_tab");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})},P=$,E=i("2877"),S=Object(E["a"])(P,o,r,!1,null,null,null),M=S.exports,z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full flex-col",attrs:{id:"tabs"}},[i("div",{staticClass:"flex-row",attrs:{id:"tab-area"}},[i("ui-tabs",{staticClass:"expand",attrs:{tabs:t.tabs,itab:t.itab},on:{tab_changed:t.on_tab_changed,tab_closed:t.on_tab_closed}}),i("div",{staticClass:"full-h px-8px",attrs:{id:"icon-area"}},[i("div",{staticClass:"vcenter hspaced-8px"},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"file"},on:{click:t.on_new_file}}),i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"folder-open"},on:{click:t.on_open_file}})],1)])],1),i("div",{staticClass:"expand center",attrs:{id:"content"}},[i("keep-alive",["none"===t.curr_editor.type?i(t.tab_comp[t.itab],{tag:"component",staticStyle:{width:"320px",height:"240px"},on:{create_page:t.on_create_page,cancelled:t.on_tab_closed}}):i(t.tab_comp[t.itab],{tag:"component",attrs:{o:t.tabs[t.itab].data}})],1)],1)])},D=[],T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[t._v("editor_anim "+t._s(t.val))])},A=[],R={name:"editor_anim",data:function(){return{val:null}},created:function(){this.val=Math.floor(101*Math.random())}},H=R,L=Object(E["a"])(H,T,A,!1,null,null,null),F=L.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ui-splitter",{attrs:{id:"splitter",min2:"400px",max2:"520px",mode:"B"}},[i("ed-map-image",{attrs:{slot:"slot1",o:t.o},slot:"slot1"}),i("ed-map-sidebar",{attrs:{slot:"slot2",o:t.o},slot:"slot2"})],1)},W=[],B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full flex-col",attrs:{id:"el_tileset_image"}},[i("div",{staticClass:"center",attrs:{id:"toolbar"}},[i("ui-tooltip",{attrs:{text:"Point Tool"}},[i("faicon",{staticClass:"icon toolbar-icon",class:{selected:t.o.edit_mode==t.map_mode.point},attrs:{icon:"mouse-pointer"},on:{mousedown:function(e){return t.set_prop([t.o,"edit_mode",t.map_mode.point])}}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Rectangle Tool"}},[i("faicon",{staticClass:"icon toolbar-icon",class:{selected:t.o.edit_mode==t.map_mode.rect},attrs:{icon:["far","square"]},on:{mousedown:function(e){return t.set_prop([t.o,"edit_mode",t.map_mode.rect])}}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Fill Tool"}},[i("faicon",{staticClass:"icon toolbar-icon",class:{selected:t.o.edit_mode==t.map_mode.fill},attrs:{icon:"fill-drip"},on:{mousedown:function(e){return t.set_prop([t.o,"edit_mode",t.map_mode.fill])}}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Zoom Out"}},[i("faicon",{staticClass:"icon toolbar-icon",attrs:{icon:"search-minus"},on:{mousedown:t.on_save}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Zoom In"}},[i("faicon",{staticClass:"icon toolbar-icon",attrs:{icon:"search-plus"},on:{mousedown:t.on_save}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Toggle Grid"}},[i("ui-icon",{staticClass:"toolbar-icon",attrs:{icon:"grid",height:"12px",text:"",base:""},on:{mousedown:t.on_save}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Save"}},[i("faicon",{staticClass:"icon toolbar-icon",attrs:{icon:"save"},on:{mousedown:t.on_save}})],1)],1),i("div",{staticClass:"expand flex overflow-auto",attrs:{id:"image-container"}},[i("canvas",{ref:"canvas",staticClass:"no-shrink block margin-auto",attrs:{id:"canvas"},on:{mousedown:t.on_mousedown,mousemove:t.on_mousemove,mouseout:t.on_mouseout,mouseenter:t.on_mouseenter}})])])},N=[],U=(i("6c7b"),{props:0,flags:1,coll:2,terra:3,anim:4}),J={none:0,all:1,custom:2},X={beg_to_end:0,back_and_forth:1},q={not_set:-1,tile:0,terra:1},G={_4x3:0,_5x1:1},Y={point:0,rect:1,fill:2},Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"editor_tileset"}},[i("ui-splitter",{attrs:{id:"splitter",min2:"400px",max2:"520px",mode:"B"}},[i("ed-tileset-image",{attrs:{slot:"slot1",o:t.o},slot:"slot1"}),i("ed-tileset-sidebar",{attrs:{slot:"slot2",o:t.o},slot:"slot2"})],1)],1)},K=[],V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full flex-col",attrs:{id:"el_tileset_image"}},[i("div",{staticClass:"center",attrs:{id:"toolbar"}},[i("ui-tooltip",{attrs:{text:"Zoom Out"}},[i("faicon",{staticClass:"icon toolbar-icon",attrs:{icon:"search-minus"},on:{mousedown:t.on_zoom_out}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Zoom In"}},[i("faicon",{staticClass:"icon toolbar-icon",attrs:{icon:"search-plus"},on:{mousedown:t.on_zoom_in}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Toggle Grid"}},[i("ui-icon",{staticClass:"toolbar-icon",attrs:{icon:"grid",height:"12px",text:"",base:""},on:{mousedown:t.toggle_grid}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Toggle Dim"}},[i("faicon",{staticClass:"icon toolbar-icon",attrs:{icon:"adjust"},on:{mousedown:t.toggle_dim}})],1),i("div",{staticClass:"space"}),i("ui-tooltip",{attrs:{text:"Save"}},[i("faicon",{staticClass:"icon toolbar-icon",attrs:{icon:"save"},on:{mousedown:t.on_save}})],1)],1),i("div",{staticClass:"expand flex overflow-auto",attrs:{id:"image-container"}},[i("canvas",{ref:"canvas",staticClass:"no-shrink block margin-auto",attrs:{id:"canvas"},on:{mousedown:t.on_mousedown,mousemove:t.on_mousemove,mouseout:t.on_mouseout,mouseenter:t.on_mouseenter}})])])},Q=[],tt=(i("3846"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"new_tileset"}},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("File")]),i("ui-input",{attrs:{placeholder:"file not chosen",value:t.fname,disabled:"",mclass:"expand"}}),i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"folder-open"},on:{click:t.on_file_select}})],1),i("div",{staticClass:"grid hgap-20px",staticStyle:{"grid-template-columns":"1fr 1fr","margin-top":"8px"}},[i("div",{staticClass:"g11 bold"},[t._v("Image")]),i("div",{staticClass:"g21"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Width")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",disabled:"",placeholder:"-",value:t.im_width_text,mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)]),i("div",{staticClass:"g31"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Height")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",disabled:"",placeholder:"-",value:t.im_height_text,mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)]),i("div",{staticClass:"g12 bold"},[t._v("Tile")]),i("div",{staticClass:"g22"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Width")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{mstyle:"width: 60px; text-align: right"},model:{value:t.tile_width,callback:function(e){t.tile_width=t._n(e)},expression:"tile_width"}}),i("span",[t._v("px")])],1)]),i("div",{staticClass:"g32"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Height")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{mstyle:"width: 60px; text-align: right"},model:{value:t.tile_height,callback:function(e){t.tile_height=t._n(e)},expression:"tile_height"}}),i("span",[t._v("px")])],1)])])])}),et=[],it=(i("3e8f"),i("df7c")),st=i("bdb9").remote.dialog,at={data:function(){return{fpath:"",fname:"",im_width:null,im_height:null,im_data:null}},computed:{im_width_text:function(){return null===this.im_width?"":this.im_width},im_height_text:function(){return null===this.im_height?"":this.im_height}},methods:{on_file_select:function(){var t=this;st.showOpenDialog({filters:[{name:"Image",extensions:["png"]}],properties:["openFile"]}).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(i){var s,a,n,o,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=i.canceled,a=i.filePaths,s){e.next=13;break}return t.fpath=a[0],t.fname=it.basename(t.fpath),e.next=6,m(t.fpath);case 6:n=e.sent,o=n.w,r=n.h,l=n.data,t.im_width=o,t.im_height=r,t.im_data=g(l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}};function nt(t){return JSON.stringify({type:"tileset",file:t.file,fpath:t.fpath,tile_w:t.tile_w,tile_h:t.tile_h,im_w:t.im_w,im_h:t.im_h,tileset_props:t.tileset_props,props:t.props,flags:t.flags,colls:t.colls,terra:t.terra,anims:t.anims,sec:U.props,itile:0,iflag:t.flags.length>0?0:null,iterra:t.terra.length>0?0:null,ianim:t.anims.length>0?0:null,anim_pos:0,zoom:t.zoom,grid:t.grid,dim:t.dim})}var ot={name:"new_tileset",mixins:[at],data:function(){return{tile_width:16,tile_height:16}},methods:{editor_data:function(){var t=Math.round(this.im_width*this.im_height/(this.tile_width*this.tile_height));return{file:null,fpath:this.fpath,tile_w:this.tile_width,tile_h:this.tile_height,im_w:this.im_width,im_h:this.im_height,im_data:this.im_data,tileset_props:[{key:"name",val:""}],props:Array(t).fill(0).map((function(t){return[]})),flags:[],colls:Array(t).fill(0).map((function(t){return{u:!1,ur:!1,r:!1,dr:!1,d:!1,dl:!1,l:!1,ul:!1}})),terra:[],anims:[],sec:U.props,itile:0,iflag:null,iterra:null,ianim:null,anim_pos:0,zoom:1,grid:!0,dim:!0}}}},rt=ot,lt=Object(E["a"])(rt,tt,et,!1,null,null,null),ct=lt.exports;function ht(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function ut(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ht(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}for(var pt=i("3e8f"),dt=i("df7c"),ft=i("bdb9").remote.dialog,_t=1.5,mt=2,vt=[],bt=0;bt<8;bt++){var gt=45*bt*Math.PI/180;vt[bt]={x:.35*Math.cos(gt),y:.35*Math.sin(gt)}}var xt=["r","dr","d","dl","l","ul","u","ur"],wt=vt.length+1,yt={name:"ed_tileset_image",data:function(){return{s:1}},props:{o:{}},computed:ut(ut({},Object(h["c"])(["itab"])),{},{ianim:function(){return this.o.ianim},iflag:function(){return this.o.iflag},iterra:function(){return this.o.iterra},sec:function(){return this.o.sec},smw:function(){return this.s*this.mw},smh:function(){return this.s*this.mh},stw:function(){return this.s*this.tw},sth:function(){return this.s*this.th},terra_1d_pos:function(){return null===this.o.iterra?null:this.o.terra[this.o.iterra].pos.y*this.nx+this.o.terra[this.o.iterra].pos.x},terra_shape:function(){return null===this.o.iterra?null:this.o.terra[this.o.iterra].shape}}),watch:{ianim:function(t){this.canims=this.o.anims[this.ianim]},iflag:function(t){this.cflags=this.o.flags[t];for(var e=this.nx*this.ny,i=0;i<e;i++)this.flag[i].visible=null!==t&&this.o.flags[t][i]},iterra:function(t){this.cterra=this.o.terra[this.iterra]},terra_1d_pos:function(){var t=null!==this.o.iterra;this.sel.visible=t,t&&(this.sel.x=this.stw*this.cterra.pos.x,this.sel.y=this.sth*this.cterra.pos.y)},terra_shape:function(){var t,e;this.terra_shape===G._4x3?(t=3,e=4):this.terra_shape===G._5x1&&(t=1,e=5),this.sel.clear(),this.cur.clear(),b(this.sel,t*this.stw,e*this.sth),b(this.cur,t*this.stw,e*this.sth)},sec:function(t,e){(t===U.props||t===U.terra&&null!==this.o.iterra||t===U.coll)&&(this.sel.visible=!0),t===U.anim&&(this.sel.visible=!1),this.upd_boxes(),t!==U.flags&&e!==U.flags||this.upd_flags(),t!==U.coll&&e!==U.coll||this.upd_colls()}},methods:ut(ut({},Object(h["b"])(["insert","flip","push","set_prop"])),{},{on_mousedown:function(t){switch(this.o.sec){case U.flags:if(null===this.o.iflag)return;var e=this.iy*this.nx+this.ix;return this.flip([this.o.flags[this.o.iflag],e]),void(this.flag[e].visible=this.o.flags[this.o.iflag][e]);case U.props:this.isx=this.ix,this.isy=this.iy,this.sel.x=this.isx*this.stw,this.sel.y=this.isy*this.sth,this.set_prop([this.o,"itile",this.isy*this.nx+this.isx]);break;case U.terra:if(null===this.o.iterra)return;this.terra_shape===G._4x3?(this.icx=this.ix-1,this.icy=this.iy-2):this.terra_shape===G._5x1&&(this.icx=this.ix,this.icy=this.iy-2),this.sel.x=this.icx*this.stw,this.sel.y=this.icy*this.sth,this.set_prop([this.o.terra[this.o.iterra].pos,"x",this.icx]),this.set_prop([this.o.terra[this.o.iterra].pos,"y",this.icy]);break;case U.anim:if(null!==this.o.ianim){var i=this.canims.block_type;if(i!==q.not_set&&i!==q.tile)return;this.set_prop([this.canims,"block_type",q.tile]);var s=this.iy*this.nx+this.ix;this.insert([this.canims.tiles,this.o.anim_pos,s]),ge.$emit("add_tile_anim",s)}break;case U.coll:var a=this.o.colls[this.coll_tile];if(this.curr_coll%wt===wt-1){for(var n=!1,o=0;o<wt-1;o++)if(!0===a[xt[o]]){n=!0;break}for(var r=!n,l=Math.floor(this.curr_coll/wt)*wt,c=0;c<wt-1;c++){var h=xt[c];this.set_prop([a,h,r]),this.colls[l+c].alpha=a[h]?1:.5}}else if(null!==this.curr_coll){var u=xt[this.curr_coll%wt];this.flip([a,u]),this.colls[this.curr_coll].alpha=a[u]?1:.5}break}},on_mousemove:function(t){switch(this.ix=x(Math.floor(t.offsetX/this.stw),0,this.nx-1),this.iy=x(Math.floor(t.offsetY/this.sth),0,this.ny-1),this.sec){case U.flags:this.cur_flag.x=this.stw*this.ix,this.cur_flag.y=this.sth*this.iy;break;case U.props:case U.anim:this.cur.x=this.stw*this.ix,this.cur.y=this.sth*this.iy;break;case U.terra:this.terra_shape===G._4x3?(this.cur.x=this.stw*(this.ix-1),this.cur.y=this.sth*(this.iy-2)):this.terra_shape===G._5x1&&(this.cur.x=this.stw*this.ix,this.cur.y=this.sth*(this.iy-2));break;case U.coll:if(null!==this.coll_tile)for(var e=this.coll_tile*wt,i=0;i<wt;i++)this.colls[e+i].tint=6068694;var s=t.offsetX%this.stw/this.stw-.5,a=t.offsetY%this.sth/this.sth-.5;this.coll_tile=this.iy*this.nx+this.ix;var n=this.coll_tile*wt,o=Math.pow(_t/this.tw,2);this.curr_coll=null;for(var r=0;r<wt-1;r++)if(Math.pow(s-vt[r].x,2)+Math.pow(a-vt[r].y,2)<=o){this.colls[n+r].tint=14071900,this.curr_coll=n+r;break}Math.abs(s)<=mt/this.tw/2&&Math.abs(a)<=mt/this.th/2&&(this.colls[n+wt-1].tint=14071900,this.curr_coll=n+wt-1);break}},on_mouseout:function(){this.o.sec==U.flags&&(this.cur_flag.visible=!1),this.o.sec!=U.props&&this.o.sec!=U.terra&&this.o.sec!=U.anim||(this.cur.visible=!1)},on_mouseenter:function(){this.o.sec==U.flags&&null!==this.o.iflag&&(this.cur_flag.visible=!0),(this.o.sec==U.props||this.o.sec==U.terra&&null!==this.o.iterra||this.o.sec==U.anim&&null!==this.o.ianim&&this.canims.block_type!==q.terra)&&(this.cur.visible=!0)},on_save:function(){var t=this;null===this.o.file&&ft.showSaveDialog({defaultPath:dt.dirname(this.o.fpath)}).then((function(e){var i=e.canceled,s=e.filePath;if(!i){console.log("writing json file");try{pt.writeFileSync(s,nt(t.o)),t.$message({message:"Saved tileset file",type:"success"})}catch(a){t.$message({message:"Error tileset file",type:"failure"})}}}))},on_zoom_out:function(){this.s<=.25||(this.s/=2,this.s>=1&&(this.s=Math.round(this.s)),this.o.zoom=this.s,this.resize_image())},on_zoom_in:function(){this.s>=4||(this.s*=2,this.s>=1&&(this.s=Math.round(this.s)),this.o.zoom=this.s,this.resize_image())},resize_image:function(){var t=this.$refs.canvas,e=Math.round(this.smw),i=Math.round(this.smh);t.width=e,t.height=i,t.style.width="".concat(e,"px"),t.style.height="".concat(i,"px"),this.im.scale={x:this.s,y:this.s},this.upd_all()},toggle_dim:function(){this.im.tint=16777215===this.im.tint?8947848:16777215,this.o.dim=16777215!==this.im.tint},toggle_grid:function(){this.grid.visible=!this.grid.visible,this.o.grid=this.grid.visible},upd_grid:function(){v(this.grid,this.smw,this.smh,this.stw,this.sth)},upd_all:function(){this.upd_grid(),this.upd_boxes(),this.upd_flags(),this.upd_colls()},upd_boxes:function(){var t,e;(this.sel.clear(),this.cur.clear(),this.o.sec!=U.flags)&&(this.o.sec==U.props&&(this.sel.x=this.stw*this.isx,this.sel.y=this.sth*this.isy,t=1,e=1),this.o.sec==U.anim&&(this.sel.x=this.stw*this.isx,this.sel.y=this.sth*this.isy,t=1,e=1,null===this.o.ianim&&(this.sel.visible=!1,this.cur.visible=!1)),this.o.sec==U.terra&&(this.sel.x=this.stw*this.icx,this.sel.y=this.sth*this.icy,this.terra_shape===G._4x3?(t=3,e=4):this.terra_shape===G._5x1&&(t=1,e=5),null===this.o.iterra&&(this.sel.visible=!1,this.cur.visible=!1)),b(this.sel,t*this.stw,e*this.sth),b(this.cur,t*this.stw,e*this.sth),this.cur.alpha=.5)},upd_colls:function(){if(this.coll.visible=this.o.sec===U.coll,!1===this.colls_init){this.colls_init=!0,this.coll.clear();for(var t=0,e=0;e<this.ny;e++)for(var i=0;i<this.nx;i++){for(var s=this.stw*(i+.5),a=this.sth*(e+.5),n=0;n<wt-1;n++)this.colls[t].clear(),this.colls[t].beginFill(16777215,1),this.colls[t].drawCircle(s+this.stw*vt[n].x,a+this.sth*vt[n].y,this.s*_t),this.colls[t].alpha=this.o.colls[e*this.nx+i][xt[n]]?1:.5,this.colls[t].tint=6068694,this.coll.addChild(this.colls[t]),t++;this.colls[t].clear(),this.colls[t].beginFill(16777215,1),this.colls[t].drawRect(s-this.s*mt/2,a-this.s*mt/2,this.s*mt,this.s*mt),this.colls[t].alpha=.5,this.colls[t].tint=6068694,this.coll.addChild(this.colls[t]),t++}}else this.coll.scale={x:this.s,y:this.s}},upd_flags:function(){this.flags.visible=this.o.sec===U.flags,this.cur_flag.clear(),this.cur_flag.lineStyle(1,0),this.cur_flag.beginFill(6068694,1),this.cur_flag.drawCircle(.5*this.stw,.5*this.sth,4*this.s),this.cur_flag.alpha=.5,this.cur_flag.visible=!1;for(var t=0;t<this.nx;t++)for(var e=0;e<this.ny;e++){var i=e*this.nx+t;this.flag[i].clear(),this.flag[i].lineStyle(1,0),this.flag[i].beginFill(6068694,1),this.flag[i].drawCircle(this.stw*(t+.5),this.sth*(e+.5),4*this.s),this.flag[i].visible=null!==this.iflag&&this.cflags[i],this.flags.addChild(this.flag[i])}}}),created:function(){this.mw=this.o.im_w,this.mh=this.o.im_h,this.tw=this.o.tile_w,this.th=this.o.tile_h,this.nx=Math.round(this.mw/this.tw),this.ny=Math.round(this.mh/this.th),this.canims=this.o.anims[this.o.ianim],this.cflags=this.o.flags[this.o.iflag],this.cterra=this.o.terra[this.o.iterra],this.isx=0,this.isy=0,this.icx=0,this.icy=0,this.app=null,this.im=null,this.app=null,this.im=null,this.grid=null,this.sel=null,this.cur=null,this.flags=null,this.cur_flag=null,this.coll=null,this.colls=[],this.flag=[],this.ix=null,this.iy=null,this.colls_init=!1,this.coll_tile=null,this.curr_coll=null;var t=u["b"].fromBuffer(this.o.im_data,this.mw,this.mh);Pi(this.itab,t,this.nx,this.ny,this.tw,this.th),Ei(this.itab,this.o.anims,this.tw);var e=new u["f"](t);this.im=new u["e"](e),this.im.scale={x:this.s,y:this.s},this.grid=new u["c"],this.upd_grid(),this.sel=new u["c"],this.cur=new u["c"],this.upd_boxes(),this.flags=new u["c"],this.cur_flag=new u["c"];for(var i=0;i<this.nx*this.ny;i++)this.flag[i]=new u["c"];this.upd_flags(),this.coll=new u["c"];for(var s=0,a=0;a<this.ny;a++)for(var n=0;n<this.nx;n++)for(var o=0;o<wt;o++)this.colls[s++]=new u["c"];this.upd_colls()},mounted:function(){this.$refs.canvas.style.width="".concat(Math.round(this.s*this.mw),"px"),this.$refs.canvas.style.height="".concat(Math.round(this.s*this.mh),"px"),this.app=new u["a"]({width:this.s*this.mw,height:this.s*this.mh,view:this.$refs.canvas,resizeTo:this.$refs.canvas,antialias:!0}),this.app.stage.addChild(this.im),this.app.stage.addChild(this.grid),this.app.stage.addChild(this.cur),this.app.stage.addChild(this.sel),this.app.stage.addChild(this.flags),this.app.stage.addChild(this.cur_flag),this.app.stage.addChild(this.coll)}},Ot=yt,Ct=(i("b675"),Object(E["a"])(Ot,V,Q,!1,null,"4396c8ba",null)),kt=Ct.exports,jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"ed_tileset_sidebar"}},[i("div",{staticClass:"bold full-w text-center"},[t._v("TILESET PROPERTIES")]),i("div",{attrs:{id:"tileset"}},[i("div",{staticClass:"bold ml-4px"},[t._v("Key")]),i("div",{staticClass:"bold ml-4px"},[t._v("Value")]),i("ui-tooltip",{attrs:{text:"Add",placement:"left"}},[i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"plus"},on:{click:t.add_tileset_prop}})],1)]),t._l(t.o.tileset_props,(function(e,s){return[i("ui-input",{attrs:{small:""},model:{value:e.key,callback:function(i){t.$set(e,"key",i)},expression:"item.key"}}),i("ui-input",{attrs:{small:""},model:{value:e.val,callback:function(i){t.$set(e,"val",i)},expression:"item.val"}}),i("ui-tooltip",{attrs:{text:"Remove",placement:"left"}},[i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"minus"},on:{click:function(e){return t.remove_tileset_prop(s)}}})],1)])]}))],2),i("div",{staticClass:"hdivider"}),i("div",{staticClass:"bold full-w text-center mb-8px"},[t._v("TILE PROPERTIES")]),i("div",[i("div",{staticClass:"tile-title",class:{active:t.o.sec==t.tile_mode.props},on:{click:function(e){return t.set_tile_sec(t.tile_mode.props)}}},[t._v("PROPS")]),i("div",{staticClass:"tile-title",class:{active:t.o.sec==t.tile_mode.flags},on:{click:function(e){return t.set_tile_sec(t.tile_mode.flags)}}},[t._v("FLAGS")]),i("div",{staticClass:"tile-title",class:{active:t.o.sec==t.tile_mode.coll},on:{click:function(e){return t.set_tile_sec(t.tile_mode.coll)}}},[t._v("COLLISION")]),i("div",{staticClass:"tile-title",class:{active:t.o.sec==t.tile_mode.terra},on:{click:function(e){return t.set_tile_sec(t.tile_mode.terra)}}},[t._v("TERRA")]),i("div",{staticClass:"tile-title",class:{active:t.o.sec==t.tile_mode.anim},on:{click:function(e){return t.set_tile_sec(t.tile_mode.anim)}}},[t._v("ANIM")])]),i("keep-alive",[i(t.curr_tile_comp,{tag:"component",attrs:{o:t.o}})],1)],1)},$t=[],Pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"tile_anim"}},[i("div",{staticClass:"flex-row mt-8px align-bl"},[i("div",{staticClass:"w-1-2 flex-row align-bl pr-8px"},[i("span",{staticClass:"bold mr-8px"},[t._v("Cycle")]),i("ui-combobox",{staticClass:"expand",attrs:{items:["Beginning to end","Back and forth"],disabled:null===t.o.ianim},model:{value:t.tile_type_model,callback:function(e){t.tile_type_model=e},expression:"tile_type_model"}})],1),i("div",{staticClass:"w-1-2 flex-row align-bl"},[i("span",{staticClass:"bold ws-nowrap mr-8px ml-4px"},[t._v("Frame duration")]),i("ui-input",{staticClass:"expand",attrs:{small:"",right:"",disabled:null===t.o.ianim,type:"number",placeholder:"ms"},model:{value:t.frame_dur_model,callback:function(e){t.frame_dur_model=e},expression:"frame_dur_model"}})],1)]),i("div",{ref:"canvases",staticClass:"flex-row mt-8px full-w pos-relative",staticStyle:{height:"0px"}},[i("canvas",{ref:"canvas_preview",staticClass:"mr-8px fixed",staticStyle:{width:"0px",height:"0px"}}),i("div",{ref:"right_part",staticClass:"expand pos-absolute",staticStyle:{right:"0",left:"0"}},[i("div",{staticClass:"span bold"},[t._v("Terra")]),i("div",{ref:"container_terra",staticClass:"expand mb-8px overflow-x-scoll overflow-y-hidden ws-nowrap",staticStyle:{height:"0px","background-color":"#1d1e1f"}},[i("canvas",{ref:"canvas_terra"})]),i("div",{staticClass:"flex-row align-bl"},[i("span",{staticClass:"bold"},[t._v("Tiles")]),i("div",{staticClass:"expand"}),i("ui-tooltip",{attrs:{text:"Remove",placement:"left"}},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"minus"},on:{click:t.on_minus_tiles}})],1)],1),i("div",{ref:"container_tiles",staticClass:"expand overflow-x-scoll overflow-y-hidden ws-nowrap",staticStyle:{height:"0px","background-color":"#1d1e1f"}},[i("canvas",{ref:"canvas_tiles"})])])]),i("div",{staticClass:"flex-row mt-8px"},[i("div",{staticClass:"bold ml-4px"},[t._v("Anim")]),i("div",{staticClass:"expand"}),i("ui-tooltip",{attrs:{text:"Add",placement:"left"}},[i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"plus"},on:{click:t.on_plus}})],1)])],1),i("div",t._l(t.o.anims,(function(e,s){return i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon it-icon",class:{selected:t.o.ianim==s},attrs:{icon:"tag"},on:{mousedown:function(e){return t.set_ianim(s)}}}),i("ui-input",{staticClass:"invisible mr-4px",class:{selected:t.o.ianim==s,expand:!0},attrs:{small:""},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),i("ui-tooltip",{attrs:{text:"Remove",placement:"left"}},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"minus"},on:{click:function(e){return t.on_minus(s)}}})],1)],1)})),0)])},Et=[];function St(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Mt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?St(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):St(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var zt={name:"tile_anim",props:{o:{}},computed:Mt(Mt({},Object(h["c"])(["itab"])),{},{frame_dur_model:{get:function(){return null===this.o.ianim?"":this.o.anims[this.o.ianim].frame_dur},set:function(t){null!==this.o.ianim&&(this.o.anims[this.o.ianim].frame_dur=t)}},tile_type_model:{get:function(){return null===this.o.ianim?0:this.o.anims[this.o.ianim].cycle_type},set:function(t){null!==this.o.ianim&&(this.o.anims[this.o.ianim].cycle_type=t)}},ntiles:function(){return null===this.o.ianim?0:this.o.anims[this.o.ianim].tiles.length}}),watch:{"o.ianim":function(){this.canims=this.o.anims[this.o.ianim]}},methods:Mt(Mt({},Object(h["b"])(["insert","push","remove","set_prop"])),{},{add_tile_anim:function(t){var e=new u["e"](Ti.tabs[this.itab_].g_tiles[t]);e.x=this.o.anim_pos*this.o.tile_w,e.y=0,this.insert([Ti.tabs[this.itab_].g_anim_tiles[this.o.ianim],this.o.anim_pos,e]),this.upd_canvas_tiles(),this.o.anim_pos++},clear_app:function(t){for(var e=t.stage.children.length-1;e>=0;e--)t.stage.removeChildAt(e)},on_click_terra:function(t){if(null!==this.o.ianim){var e=this.canims.block_type;if(e===q.not_set||e===q.terra){this.set_prop([this.canims,"block_type",q.terra]);var i=Math.round(this.o.im_w/this.o.tile_w),s=(x(Math.floor(t.offsetX/this.o.tile_w),0,this.o.terra.length-1),this.o.terra[iterra].pos.y*i+this.o.terra[iterra].pos.x);this.insert([this.canims.tiles,this.o.anim_pos,s]),this.add_tile_anim(s)}}},on_plus:function(){this.push([this.o.anims,{name:"new anim",tiles:[],frame_dur:200,cycle_type:X.beg_to_end,block_type:q.not_set}]),this.push([Ti.tabs[this.itab_].g_anim_tiles,[]]),1==this.o.anims.length&&(this.set_prop([this.o,"ianim",0]),this.telap=0),this.upd_canvas_tiles()},on_minus:function(t){this.remove([this.o.anims,t]),0==this.o.anims.length?(this.set_prop([this.o,"ianim",null]),this.set_prop([this.o,"anim_pos",0])):this.o.ianim>=this.o.anims.length&&(this.set_prop([this.o,"ianim",this.o.anims.length-1]),this.set_prop([this.o,"anim_pos",0]),this.telap=0),this.upd_canvas_tiles()},on_minus_tiles:function(){var t=this.ntiles;0!==t&&(this.remove([this.o.anims[this.o.ianim].tiles,t-1]),this.remove([Ti.tabs[this.itab_].g_anim_tiles[this.o.ianim],t-1]),this.upd_canvas_tiles(),this.o.anim_pos--,0===this.o.anim_pos&&this.set_prop([this.canims,"block_type",q.not_set]))},set_ianim:function(t){t!==this.o.ianim&&(this.set_prop([this.o,"ianim",t]),this.set_prop([this.o,"anim_pos",this.ntiles]),this.upd_canvas_tiles(),this.telap=0)},upd_canvas_tiles:function(){var t=null===this.o.ianim?0:this.ntiles;if(this.$refs.canvas_tiles.style.width="".concat(this.o.tile_w*t,"px"),this.$refs.canvas_tiles.style.height="".concat(this.o.tile_h,"px"),this.clear_app(this.app_tiles),this.app_tiles.resize(),null!==this.o.ianim)for(var e=0;e<t;e++)this.app_tiles.stage.addChild(Ti.tabs[this.itab_].g_anim_tiles[this.o.ianim][e])}}),created:function(){ge.$on("add_tile_anim",this.add_tile_anim),this.app_tiles=null,this.app_preview=null,this.app_terra=null,this.telap=0,this.iframe=0,this.itab_=this.itab,this.canims=this.o.anims[this.o.ianim]},mounted:function(){var t=this,e=this.o.terra.length,i=null===this.o.ianim?0:this.canims.tiles.length;this.$refs.canvas_tiles.style.width="".concat(this.o.tile_w*i,"px"),this.$refs.canvas_tiles.style.height="".concat(this.o.tile_h,"px"),this.$refs.canvas_terra.style.width="".concat(this.o.tile_w*e,"px"),this.$refs.canvas_terra.style.height="".concat(this.o.tile_h,"px"),this.$refs.container_tiles.style.height="".concat(this.o.tile_h,"px"),this.$refs.container_terra.style.height="".concat(this.o.tile_h,"px");var s=this.$refs.right_part.offsetHeight;this.$refs.canvas_preview.style.width="".concat(s,"px"),this.$refs.canvas_preview.style.height="".concat(s,"px"),this.$refs.canvases.style.height="".concat(s,"px"),this.$refs.right_part.style.left="".concat(s+8,"px"),this.app_tiles=new u["a"]({width:this.o.tile_w*i,height:this.o.tile_h,view:this.$refs.canvas_tiles,resizeTo:this.$refs.canvas_tiles,antialias:!0,backgroundColor:1908255}),this.upd_canvas_tiles(),this.app_terra=new u["a"]({width:this.o.tile_w*e,height:this.o.tile_h,view:this.$refs.canvas_terra,resizeTo:this.$refs.canvas_terra,antialias:!0,backgroundColor:1908255}),this.app_terra.view.addEventListener("mousedown",this.on_click_terra),this.app_preview=new u["a"]({width:s,height:s,view:this.$refs.canvas_preview,antialias:!0,backgroundColor:1908255}),this.app_preview.ticker.add((function(e){if(0!==t.ntiles){var i,a=!1;0===t.telap&&(a=!0),t.telap+=t.app_preview.ticker.elapsedMS;var n=t.canims.cycle_type;switch(n){case X.beg_to_end:i=Math.floor(t.telap/t.canims.frame_dur)%t.ntiles;break;case X.back_and_forth:i=Math.floor(t.telap/t.canims.frame_dur)%(2*t.ntiles-2),i>=t.ntiles&&(i=2*t.ntiles-2-i);break}if(a||i===t.iframe||(a=!0),a){t.iframe=i,t.clear_app(t.app_preview);var o=t.canims.tiles[t.iframe],r=new u["e"](Ti.tabs[t.itab_].g_tiles[o]);r.width=s,r.height=s,t.app_preview.stage.addChild(r)}}else t.clear_app(t.app_preview)}))},activated:function(){this.app_preview.ticker.start();var t=Math.round(this.o.im_w/this.o.tile_w);this.$refs.canvas_terra.style.width="".concat(this.o.tile_w*this.o.terra.length,"px"),this.$refs.canvas_terra.style.height="".concat(this.o.tile_h,"px"),this.clear_app(this.app_terra),this.app_terra.resize();for(var e=0;e<this.o.terra.length;e++){var i=this.o.terra[e].pos.y*t+this.o.terra[e].pos.x,s=new u["e"](Ti.tabs[this.itab_].g_tiles[i]);s.x=this.o.tile_w*e,s.y=0,this.app_terra.stage.addChild(s)}},deactivated:function(){this.app_preview.ticker.stop()},beforeDestroy:function(){this.app_terra.view.removeEventListener("mousedown",this.on_click_terra),ge.$off("add_tile_anim",this.add_tile_anim)}},Dt=zt,Tt=(i("9391"),Object(E["a"])(Dt,Pt,Et,!1,null,"47b76b26",null)),At=Tt.exports,Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"tile_coll"}})},Ht=[],Lt={name:"tile_coll"},Ft=Lt,It=(i("dd95"),Object(E["a"])(Ft,Rt,Ht,!1,null,"36010b82",null)),Wt=It.exports,Bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"tile_flags"}},[i("div",{staticClass:"flex-row mt-8px"},[i("div",{staticClass:"bold ml-4px"},[t._v("Flag")]),i("div",{staticClass:"expand"}),i("ui-tooltip",{attrs:{text:"Add",placement:"left"}},[i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"plus"},on:{click:t.on_plus}})],1)])],1),i("div",t._l(t.o.flags,(function(e,s){return i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon it-icon",class:{selected:t.o.iflag==s},attrs:{icon:"tag"},on:{mousedown:function(e){return t.set_iflag(s)}}}),i("ui-input",{staticClass:"invisible mr-4px",class:{selected:t.o.iflag==s,expand:!0},attrs:{id:"tile-flag",small:""},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),i("ui-tooltip",{attrs:{text:"Remove",placement:"left"}},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"minus"},on:{click:function(e){return t.on_minus(s)}}})],1)],1)})),0)])},Nt=[];function Ut(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Jt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ut(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Xt={name:"tile_flags",props:{o:{}},methods:Jt(Jt({},Object(h["b"])(["push","remove","set_prop"])),{},{on_plus:function(){var t=Math.round(this.o.im_w*this.o.im_h/this.o.tile_w/this.o.tile_h);this.push([this.o.flags,{name:"new flag",tiles:Array(t).fill(!1)}]),1==this.o.flags.length&&this.set_prop([this.o,"iflag",0])},on_minus:function(t){this.remove([this.o.flags,t]),0==this.o.flags.length?this.set_prop([this.o,"iflag",null]):this.o.iflag>=this.o.flags.length&&this.set_prop([this.o,"iflag",this.o.flags.length-1])},set_iflag:function(t){this.set_prop([this.o,"iflag",t])}})},qt=Xt,Gt=(i("511a"),Object(E["a"])(qt,Bt,Nt,!1,null,"bf090330",null)),Yt=Gt.exports,Zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-value-grid",attrs:{id:"tile_tiles"}},[i("div",{staticClass:"bold ml-4px"},[t._v("Key")]),i("div",{staticClass:"bold ml-4px"},[t._v("Value")]),i("ui-tooltip",{attrs:{text:"Add",placement:"left"}},[i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"plus"},on:{click:t.on_plus}})],1)]),t._l(t.o.props[t.o.itile],(function(e,s){return[i("ui-input",{attrs:{small:""},model:{value:e.key,callback:function(i){t.$set(e,"key",i)},expression:"item.key"}}),i("ui-input",{attrs:{small:""},model:{value:e.val,callback:function(i){t.$set(e,"val",i)},expression:"item.val"}}),i("ui-tooltip",{attrs:{text:"Remove",placement:"left"}},[i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"minus"},on:{click:function(e){return t.on_minus(s)}}})],1)])]}))],2)},Kt=[];function Vt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Qt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Vt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var te={name:"tile_props",props:{o:{}},methods:Qt(Qt({},Object(h["b"])(["push","remove"])),{},{on_plus:function(){this.push([this.o.props[this.o.itile],{key:"",val:""}])},on_minus:function(t){this.remove([this.o.props[this.o.itile],t])}})},ee=te,ie=(i("51c6"),Object(E["a"])(ee,Zt,Kt,!1,null,"da899d0e",null)),se=ie.exports,ae=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"tile_terra"}},[i("div",{staticClass:"bold"},[t._v("Terra")]),i("div",{staticClass:"bold"},[t._v("Collision")]),i("div",{staticClass:"bold"},[t._v("Shape")]),i("ui-tooltip",{attrs:{text:"Add",placement:"left"}},[i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"plus"},on:{click:t.on_plus}})],1)]),t._l(t.o.terra,(function(e,s){return[i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon it-icon",class:{selected:t.o.iterra==s},attrs:{icon:"tag"},on:{mousedown:function(e){return t.set_iterra(s)}}}),i("ui-input",{staticClass:"invisible",class:{selected:t.o.iterra==s,expand:!0},attrs:{small:""},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon icon-w hover-hl mr-4px",class:{inactive:e.coll!==t.coll_type.none},attrs:{icon:["far","dot-circle"]},on:{click:function(i){return t.set_prop([e,"coll",t.coll_type.none])}}}),i("faicon",{staticClass:"icon icon-w hover-hl",class:{inactive:e.coll!==t.coll_type.all},attrs:{icon:["far","times-circle"]},on:{click:function(i){return t.set_prop([e,"coll",t.coll_type.all])}}})],1),i("div",{staticClass:"flex-row align-bl"},[i("ui-icon",{staticClass:"icon icon-w hover-hl",class:{inactive:e.shape!==t.terra_shape_type._4x3},attrs:{icon:"terra4x3",height:"12px",text:"",base:""},on:{click:function(i){return t.set_prop([e,"shape",t.terra_shape_type._4x3])}}}),i("ui-icon",{staticClass:"icon icon-w hover-hl",class:{inactive:e.shape!==t.terra_shape_type._5x1},attrs:{icon:"terra5x1",height:"12px",text:"",base:""},on:{click:function(i){return t.set_prop([e,"shape",t.terra_shape_type._5x1])}}})],1),i("ui-tooltip",{attrs:{text:"Remove",placement:"left"}},[i("div",{staticClass:"flex-row align-bl"},[i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"minus"},on:{click:function(e){return t.on_minus(s)}}})],1)])]}))],2)},ne=[];function oe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function re(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):oe(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var le={name:"tile_terra",data:function(){return{coll_type:J,terra_shape_type:G}},props:{o:{}},methods:re(re({},Object(h["b"])(["push","remove","set_prop"])),{},{on_plus:function(){this.push([this.o.terra,{name:"new terra",pos:{x:0,y:0},coll:J.none,shape:G._4x3}]),1==this.o.terra.length&&this.set_prop([this.o,"iterra",0])},on_minus:function(t){this.remove([this.o.terra,t]),0==this.o.terra.length?this.set_prop([this.o,"iterra",null]):this.o.iterra>=this.o.terra.length&&this.set_prop([this.o,"iterra",this.o.terra.length-1])},set_iterra:function(t){this.set_prop([this.o,"iterra",t])}})},ce=le,he=(i("50fe"),Object(E["a"])(ce,ae,ne,!1,null,"f5bb7d58",null)),ue=he.exports;function pe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function de(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var fe=[se,Yt,Wt,ue,At],_e={name:"ed_tileset_sidebar",data:function(){return{curr_tile_comp:null,tile_mode:U}},props:{o:{}},components:{"tile-anim":At,"tile-coll":Wt,"tile-flags":Yt,"tile-props":se,"tile-terra":ue},methods:de(de({},Object(h["b"])(["push","remove","set_prop"])),{},{add_tileset_prop:function(){this.push([this.o.tileset_props,{key:"",val:""}])},remove_tileset_prop:function(t){this.remove([this.o.tileset_props,t])},set_tile_sec:function(t){this.set_prop([this.o,"sec",t]),this.curr_tile_comp=fe[t]}}),created:function(){this.curr_tile_comp=fe[this.o.sec]}},me=_e,ve=(i("262b"),Object(E["a"])(me,jt,$t,!1,null,"91242ce4",null)),be=ve.exports,ge=new s["a"],xe={name:"editor_tileset",props:{o:{}},components:{"ed-tileset-image":kt,"ed-tileset-sidebar":be}},we=xe,ye=(i("1ea4"),Object(E["a"])(we,Z,K,!1,null,"3dee9d54",null)),Oe=ye.exports;function Ce(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function ke(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ce(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var je={name:"ed_map_image",data:function(){return{map_mode:Y,s:1}},props:{o:{}},computed:ke(ke({},Object(h["c"])(["itab"])),{},{stw:function(){return this.s*this.tw},sth:function(){return this.s*this.th},ntiles:function(){return this.tiles.length}}),methods:ke(ke({},Object(h["b"])(["set_prop"])),{},{on_mousedown:function(t){},on_mousemove:function(t){this.sel_tiles.visible||(this.sel_tiles.visible=!0),this.ix=x(Math.floor(t.offsetX/this.stw),0,this.map_w-1),this.iy=x(Math.floor(t.offsetY/this.sth),0,this.map_h-1),this.sel_tiles.x=this.ix*this.stw,this.sel_tiles.y=this.iy*this.sth},on_mouseout:function(t){this.sel_tiles.visible=!1},on_mouseenter:function(t){this.sel_tiles.texture=Ti.tabs[this.itab_].g_sel_tiles,this.sel_tiles.visible=!0},on_save:function(){}}),created:function(){this.tw=this.o.ts.tile_w,this.th=this.o.ts.tile_h,this.ts_im_w=this.o.ts.im_w,this.ts_im_h=this.o.ts.im_h,this.tnx=Math.round(this.ts_im_w/this.tw),this.tny=Math.round(this.ts_im_h/this.th),this.map_w=this.o.map_w,this.map_h=this.o.map_h,this.itab_=this.itab,this.tiles=Array(this.map_w*this.map_h).fill(-1)},mounted:function(){var t=this.map_w*this.tw,e=this.map_h*this.th;this.$refs.canvas.style.width="".concat(Math.round(this.s*t),"px"),this.$refs.canvas.style.height="".concat(Math.round(this.s*e),"px"),this.app=new u["a"]({width:this.s*t,height:this.s*e,view:this.$refs.canvas,resizeTo:this.$refs.canvas,backgroundColor:1118481,antialias:!0}),this.sel_tiles=new u["e"](Ti.tabs[this.itab].g_tiles[0]),this.sel_tiles.alpha=.5,this.app.stage.addChild(this.sel_tiles),this.sel_tiles.x=0,this.sel_tiles.y=0,this.sel_tiles.visible=!1}},$e=je,Pe=(i("e6bf"),Object(E["a"])($e,B,N,!1,null,"1ee97ffd",null)),Ee=Pe.exports,Se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"ed_map_sidebar"}},[i("div",{staticClass:"bold full-w text-center"},[t._v("TILESET")]),i("div",{staticClass:"expand flex overflow-auto mt-8px",attrs:{id:"tileset"}},[i("canvas",{ref:"canvas_tileset",staticClass:"no-shrink block margin-auto",attrs:{id:"canvas-tileset"},on:{mousedown:t.on_mousedown_tileset,mouseup:t.on_mouseup_tileset,mousemove:t.on_mousemove_tileset,mouseout:t.on_mouseout_tileset}})]),i("div",{staticClass:"hdivider"}),i("div",[i("div",{staticClass:"map-title mr-8px"},[i("div",[t._v("ANIMS")]),i("div",{staticClass:"expand flex overflow-auto mt-8px",staticStyle:{"background-color":"#1d1e1f"},attrs:{id:"anims"}},[i("canvas",{ref:"canvas_anims",staticClass:"no-shrink block",attrs:{id:"canvas-anims"},on:{mousedown:t.on_mousedown_anims}})])]),i("div",{staticClass:"map-title ml-8px"},[i("div",[t._v("TERRA")]),i("div",{staticClass:"expand flex overflow-auto mt-8px",staticStyle:{"background-color":"#1d1e1f"},attrs:{id:"terra"}},[i("canvas",{ref:"canvas_terra",staticClass:"no-shrink block",attrs:{id:"canvas-terra"},on:{mousedown:t.on_mousedown_terra}})])])])])},Me=[],ze=i("768b");function De(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Te(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?De(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):De(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Ae={tileset:0,anims:1,terra:2},Re={name:"ed_map_sidebar",data:function(){return{ix0:0,iy0:0,ix1:0,iy1:0,s:1,mousedown:!1}},props:{o:{}},computed:Te(Te({},Object(h["c"])(["itab"])),{},{stw:function(){return this.s*this.tw},sth:function(){return this.s*this.th},isx:function(){return Math.min(this.ix0,this.ix1)},isy:function(){return Math.min(this.iy0,this.iy1)},sw:function(){return Math.abs(this.ix0-this.ix1)+1},sh:function(){return Math.abs(this.iy0-this.iy1)+1}}),watch:{sw:function(t){this.curr_canvas===Ae.tileset&&this.upd_cursor()},sh:function(t){this.curr_canvas===Ae.tileset&&this.upd_cursor()}},methods:{get_ixy:function(t){return[x(Math.floor(t.offsetX/this.stw),0,this.tnx-1),x(Math.floor(t.offsetY/this.sth),0,this.tny-1)]},on_mousedown_tileset:function(t){this.prev_canvas=this.curr_canvas,this.curr_canvas=Ae.tileset,this.set_ixy(t),this.mousedown=!0,this.sel_type=Ae.tileset,this.upd_g_sel_tiles()},on_mouseup_tileset:function(t){this.mousedown=!1},on_mouseout_tileset:function(t){this.mousedown=!1},on_mousemove_tileset:function(t){if(this.mousedown){var e=this.get_ixy(t),i=Object(ze["a"])(e,2),s=i[0],a=i[1],n=this.ix1!==s||this.iy1!==a;this.ix1=s,this.iy1=a,n&&this.upd_g_sel_tiles()}},on_mousedown_anims:function(t){this.prev_canvas=this.curr_canvas,this.curr_canvas=Ae.anims,this.set_ixy(t),this.sel_type=Ae.anims,this.upd_cursor()},on_mousedown_terra:function(t){this.prev_canvas=this.curr_canvas,this.curr_canvas=Ae.terra,this.set_ixy(t),this.sel_type=Ae.terra,this.upd_cursor()},set_ixy:function(t){var e=this.get_ixy(t),i=Object(ze["a"])(e,2),s=i[0],a=i[1];this.ix0=this.ix1=s,this.iy0=this.iy1=a,this.sel.x=this.isx*this.stw,this.sel.y=this.isy*this.sth},upd_cursor:function(){switch(this.prev_canvas){case Ae.tileset:this.app_tileset.stage.removeChild(this.sel);break;case Ae.anims:this.app_anims.stage.removeChild(this.sel);break;case Ae.terra:this.app_terra.stage.removeChild(this.sel);break}switch(this.sel.clear(),b(this.sel,this.sw*this.stw,this.sh*this.sth),this.sel.x=this.stw*this.isx,this.sel.y=this.sth*this.isy,this.curr_canvas){case Ae.tileset:this.app_tileset.stage.addChild(this.sel);break;case Ae.anims:this.app_anims.stage.addChild(this.sel);break;case Ae.terra:this.app_terra.stage.addChild(this.sel);break}},upd_g_sel_tiles:function(){Ti.tabs[this.itab_].g_sel_tiles=new u["f"](Ti.tabs[this.itab_].base_tex,new u["d"](this.sel.x,this.sel.y,this.sw*this.stw,this.sh*this.sth))}},created:function(){this.tw=this.o.ts.tile_w,this.th=this.o.ts.tile_h,this.ts_im_w=this.o.ts.im_w,this.ts_im_h=this.o.ts.im_h,this.tnx=Math.round(this.ts_im_w/this.tw),this.tny=Math.round(this.ts_im_h/this.th),this.itab_=this.itab;var t=new u["f"](Ti.tabs[this.itab].base_tex);this.im_tileset=new u["e"](t),this.grid=new u["c"],this.grid.lineStyle(1,16777215);for(var e=1;e<this.tnx;e++)this.grid.moveTo(this.tw*e,0).lineTo(this.tw*e,this.ts_im_h+1);for(var i=1;i<this.tny;i++)this.grid.moveTo(0,this.th*i).lineTo(this.ts_im_w+1,this.th*i);this.grid.alpha=.15,this.curr_canvas=Ae.tileset,this.prev_canvas=Ae.tileset,this.sel_type=Ae.tileset},mounted:function(){var t=this.o.ts.anims.length,e=this.o.ts.terra.length;this.$refs.canvas_tileset.style.width="".concat(this.ts_im_w,"px"),this.$refs.canvas_tileset.style.height="".concat(this.ts_im_h,"px"),this.$refs.canvas_anims.style.width="".concat(this.tw*t,"px"),this.$refs.canvas_anims.style.height="".concat(this.th,"px"),this.$refs.canvas_terra.style.width="".concat(this.tw*e,"px"),this.$refs.canvas_terra.style.height="".concat(this.th,"px"),this.app_tileset=new u["a"]({width:this.ts_im_w,height:this.ts_im_h,view:this.$refs.canvas_tileset,resizeTo:this.$refs.canvas_tileset,antialias:!0}),this.app_tileset.stage.addChild(this.im_tileset),this.app_tileset.stage.addChild(this.grid),this.app_tileset.stage.addChild(this.grid),this.app_anims=new u["a"]({width:this.tw*t,height:this.th,view:this.$refs.canvas_anims,resizeTo:this.$refs.canvas_anims,antialias:!0}),this.app_terra=new u["a"]({width:this.tw*e,height:this.th,view:this.$refs.canvas_terra,resizeTo:this.$refs.canvas_terra,antialias:!0});for(var i=0;i<this.o.ts.terra.length;i++){var s=this.o.ts.terra[i].pos.y*this.tnx+this.o.ts.terra[i].pos.x,a=new u["e"](Ti.tabs[this.itab].g_tiles[s]);a.x=this.tw*i,a.y=0,this.app_terra.stage.addChild(a)}for(var n=0;n<this.o.ts.anims.length;n++){var o=Ti.tabs[this.itab].g_anim_tiles[n][0];o.x=this.tw*n,o.y=0,this.app_anims.stage.addChild(o)}this.sel=new u["c"],b(this.sel,this.stw,this.sth),this.app_tileset.stage.addChild(this.sel),this.upd_g_sel_tiles()}},He=Re,Le=(i("82c9"),Object(E["a"])(He,Se,Me,!1,null,"223e02b5",null)),Fe=Le.exports;function Ie(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function We(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ie(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}new s["a"];var Be={name:"editor_map",props:{o:{}},computed:We({},Object(h["c"])(["itab"])),components:{"ed-map-image":Ee,"ed-map-sidebar":Fe},created:function(){var t=this.o.ts.im_w,e=this.o.ts.im_h,i=this.o.ts.tile_w,s=this.o.ts.tile_h,a=Math.round(t/i),n=Math.round(e/s);Ti.tabs[this.itab].base_tex=u["b"].fromBuffer(this.o.ts.im_data,t,e),Pi(this.itab,Ti.tabs[this.itab].base_tex,a,n,i,s),Ei(this.itab,this.o.ts.anims,i)}},Ne=Be,Ue=Object(E["a"])(Ne,I,W,!1,null,null,null),Je=Ue.exports,Xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[t._v("editor_sprite "+t._s(t.val))])},qe=[],Ge={name:"editor_sprite",data:function(){return{val:null}},created:function(){this.val=Math.floor(101*Math.random())}},Ye=Ge,Ze=Object(E["a"])(Ye,Xe,qe,!1,null,null,null),Ke=Ze.exports,Ve=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-col spaced-8px",attrs:{id:"page_new_resource"}},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Type")]),i("ui-combobox",{attrs:{items:["Sprite","Animation","Tileset","Map"],mstyle:"width: 150px"},model:{value:t.ipage,callback:function(e){t.ipage=e},expression:"ipage"}})],1),i("keep-alive",[i(t.page,{ref:"curr_page",tag:"component"})],1),i("div",{staticClass:"flex-row align-bl spaced-8px",staticStyle:{"margin-top":"16px"}},[i("div",{staticClass:"expand"}),i("button",{on:{click:function(e){return t.$emit("cancelled")}}},[t._v("Cancel")]),i("button",{staticClass:"highlighted",on:{click:t.on_click_create}},[t._v("Create")])])],1)},Qe=[],ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"new_anim"}},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("File")]),i("ui-input",{attrs:{placeholder:"file not chosen",value:t.fname,disabled:"",mclass:"expand"}}),i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"folder-open"},on:{click:t.on_file_select}})],1),i("div",{staticClass:"grid hgap-20px",staticStyle:{"grid-template-columns":"1fr 1fr","margin-top":"8px"}},[i("div",{staticClass:"g11 bold"},[t._v("Image")]),i("div",{staticClass:"g21"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Width")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",disabled:"",placeholder:"-",value:t.im_width_text,mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)]),i("div",{staticClass:"g31"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Height")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",disabled:"",placeholder:"-",value:t.im_height_text,mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)]),i("div",{staticClass:"g12 bold"},[t._v("Animation")]),i("div",{staticClass:"g22"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Width")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",value:"64",mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)]),i("div",{staticClass:"g32"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Height")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",value:"64",mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)])])])},ei=[],ii={name:"new_anim",mixins:[at]},si=ii,ai=Object(E["a"])(si,ti,ei,!1,null,null,null),ni=ai.exports,oi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"new_map"}},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Tileset")]),i("ui-input",{attrs:{placeholder:"file not chosen",value:t.fname,disabled:"",mclass:"expand"}}),i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"folder-open"},on:{click:t.on_file_select}})],1),i("div",{staticClass:"grid hgap-20px",staticStyle:{"grid-template-columns":"1fr 1fr","margin-top":"8px"}},[i("div",{staticClass:"g11"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Width")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",placeholder:"-",value:t.map_width_text,mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("tiles")])],1)]),i("div",{staticClass:"g12"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Height")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",placeholder:"-",value:t.map_height_text,mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("tiles")])],1)])])])},ri=[],li=(i("3e8f"),i("df7c")),ci=i("bdb9").remote.dialog,hi={name:"new_map",data:function(){return{fpath:"",fname:"",map_width:20,map_height:15}},computed:{map_width_text:function(){return null===this.map_width?"":this.map_width},map_height_text:function(){return null===this.map_height?"":this.map_height}},methods:{editor_data:function(){return{file:null,fpath:this.fpath,map_w:this.map_width,map_h:this.map_height,ts:this.ts,edit_mode:Y.point}},on_file_select:function(){var t=this;ci.showOpenDialog({filters:[{name:"Tileset",extensions:["json"]}],properties:["openFile"]}).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(i){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=i.canceled,a=i.filePaths,s){e.next=7;break}return t.fpath=a[0],t.fname=li.basename(t.fpath),e.next=6,k(t.fpath);case 6:t.ts=e.sent;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},ui=hi,pi=Object(E["a"])(ui,oi,ri,!1,null,null,null),di=pi.exports,fi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"new_sprite"}},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("File")]),i("ui-input",{attrs:{placeholder:"file not chosen",value:t.fname,disabled:"",mclass:"expand"}}),i("faicon",{staticClass:"icon hover-hl",attrs:{icon:"folder-open"},on:{click:t.on_file_select}})],1),i("div",{staticClass:"grid hgap-20px",staticStyle:{"grid-template-columns":"1fr 1fr","margin-top":"8px"}},[i("div",{staticClass:"g11 bold"},[t._v("Image")]),i("div",{staticClass:"g21"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Width")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",disabled:"",placeholder:"-",value:t.im_width_text,mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)]),i("div",{staticClass:"g31"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Height")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",disabled:"",placeholder:"-",value:t.im_height_text,mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)]),i("div",{staticClass:"g12 bold"},[t._v("Sprite")]),i("div",{staticClass:"g22"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Width")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",value:"24",mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)]),i("div",{staticClass:"g32"},[i("div",{staticClass:"flex-row align-bl spaced-8px"},[i("span",[t._v("Height")]),i("div",{staticClass:"expand"}),i("ui-input",{attrs:{type:"number",value:"32",mstyle:"width: 60px; text-align: right"}}),i("span",[t._v("px")])],1)])])])},_i=[],mi={name:"new_sprite",mixins:[at]},vi=mi,bi=Object(E["a"])(vi,fi,_i,!1,null,null,null),gi=bi.exports,xi={name:"page_new_resource",data:function(){return{ipage:0,pages:[["sprite",gi],["anim",ni],["tileset",ct],["map",di]]}},computed:{page:function(){return this.pages[this.ipage][1]}},components:{"new-anim":ni,"new-map":di,"new-sprite":gi,"new-tileset":ct},methods:{on_click_create:function(){var t=this.$refs.curr_page.editor_data();this.$emit("create_page",this.pages[this.ipage][0],t)}}},wi=xi,yi=(i("b03a"),Object(E["a"])(wi,Ve,Qe,!1,null,"b87be826",null)),Oi=yi.exports;function Ci(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function ki(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ci(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ci(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var ji=i("bdb9").remote.dialog,$i=i("2ef0");function Pi(t,e,i,s,a,n){console.log("setting g tiles"),Ti.tabs[t].g_tiles=[];for(var o=0,r=0;r<s;r++)for(var l=0;l<i;l++)Ti.tabs[t].g_tiles[o++]=new u["f"](e,new u["d"](l*a,r*n,a,n))}function Ei(t,e,i){Ti.tabs[t].g_anim_tiles=[];for(var s=0;s<e.length;s++){Ti.tabs[t].g_anim_tiles[s]=[];for(var a=0;a<e[s].tiles.length;a++){var n=e[s].tiles[a],o=new u["e"](Ti.tabs[t].g_tiles[n]);o.x=a*i,o.y=0,Ti.tabs[t].g_anim_tiles[s].splice(a,0,o)}}}var Si={name:"tabs",data:function(){return{tab_comp:[],editor:{none:Oi,anim:F,map:Je,sprite:Ke,tileset:Oe}}},props:{},computed:ki(ki({},Object(h["c"])(["itab","tabs"])),{},{curr_editor:function(){return this.tabs[this.itab]},ntabs:function(){return this.tabs.length}}),components:{"editor-anim":F,"editor-map":Je,"editor-sprite":Ke,"editor-tileset":Oe,"page-new-resource":Oi},methods:ki(ki({},Object(h["b"])(["push","remove","set","set_prop"])),{},{on_create_page:function(t,e){this.set_prop([this.tab_comp,this.itab,$i.cloneDeep(this.editor[t])]),this.set_prop([this.tabs,this.itab,{name:"Untitled",type:t,data:e}]),Ti.tabs[this.itab]={}},on_new_file:function(){this.push([this.tabs,{name:"Untitled",type:"none",data:{}}]);var t=this.tabs.length-1;this.set_prop([this.tab_comp,t,$i.cloneDeep(Oi)])},on_open_file:function(){var t=this;ji.showOpenDialog({}).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(i){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=i.canceled,a=i.filePaths,s){e.next=8;break}return e.next=4,k(a[0]);case 4:n=e.sent,t.push([t.tabs,{name:"Untitled",type:n.type,data:n}]),t.push([t.tab_comp,$i.cloneDeep(t.editor[t.tabs[t.itab].type])]),Ti.tabs.push({});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},on_tab_changed:function(t){this.set(["itab",t])},on_tab_closed:function(t){void 0===t&&(t=this.itab),t<=this.itab&&this.set(["itab",Math.max(this.itab-1,0)]),this.remove([this.tabs,t]),this.remove([this.tab_comp,t]),0==this.tabs.length&&this.$emit("all_tabs_closed")}}),created:function(){this.itab>this.tabs.length-1?(this.push([this.tabs,{name:"Untitled",type:"none",data:{}}]),this.push([this.tab_comp,$i.cloneDeep(Oi)]),Ti.tabs.push({})):(this.push([this.tab_comp,$i.cloneDeep(this.editor[this.tabs[this.itab].type])]),Ti.tabs.push({}))},mounted:function(){}},Mi=Si,zi=(i("a3b7"),Object(E["a"])(Mi,z,D,!1,null,"d5c56dbc",null)),Di=zi.exports,Ti={tabs:[]},Ai={name:"app",data:function(){return{page:"intro"}},components:{"page-intro":M,tabs:Di}},Ri=Ai,Hi=(i("40e1"),Object(E["a"])(Ri,a,n,!1,null,null,null)),Li=Hi.exports;s["a"].use(h["a"]);var Fi=new h["a"].Store({state:{tabs:[],itab:0},mutations:{set:function(t,e){var i=Object(ze["a"])(e,2),s=i[0],a=i[1];t[s]=a},set_prop:function(t,e){var i=Object(ze["a"])(e,3),a=i[0],n=i[1],o=i[2];s["a"].set(a,n,o)},merge:function(t,e){var i=Object(ze["a"])(e,2);i[0],i[1]},push:function(t,e){var i=Object(ze["a"])(e,2),s=i[0],a=i[1];s.push(a)},insert:function(t,e){var i=Object(ze["a"])(e,3),s=i[0],a=i[1],n=i[2];s.splice(a,0,n)},remove:function(t,e){var i=Object(ze["a"])(e,2),a=i[0],n=i[1];s["a"].delete(a,n)},flip:function(t,e){var i=Object(ze["a"])(e,2),a=i[0],n=i[1];s["a"].set(a,n,!a[n])}},actions:{}}),Ii=(i("7f7f"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-checkbox"},t._l(t.items,(function(e,s){return i("div",{key:s,on:{click:function(e){return t.on_click(s)}}},[i("span",{staticClass:"item-icon",staticStyle:{display:"inline-block"}},[t.checked[s]?i("faicon",{staticClass:"icon checked",attrs:{icon:"check-square"}}):i("faicon",{staticClass:"icon unchecked",attrs:{icon:"square"}})],1),i("span",[t._v(t._s(e))])])})),0)}),Wi=[],Bi={name:"ui-checkbox",inheritAttrs:!1,data:function(){return{checked:[]}},props:{items:{}},created:function(){this.checked=Array(this.items.length).fill(!1)},methods:{on_click:function(t){this.$set(this.checked,t,!this.checked[t]),this.$emit("clicked",this.checked)}}},Ni=Bi,Ui=(i("c72e"),Object(E["a"])(Ni,Ii,Wi,!1,null,"eada1bf2",null)),Ji=Ui.exports,Xi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ui-dropdown",{attrs:{items:t.list,disabled:t.disabled,value:t.value,trigger:"click"},on:{input:function(e){return t.$emit("input",e.target.value)},"item-selected":t.on_item_select}},[i("div",{staticClass:"dropdown",class:t.el_class,style:t.el_style},[i("span",{staticClass:"fixed"},[t._v(t._s(t.items[t.value]))]),i("div",{staticClass:"expand"}),i("span",{staticClass:"fixed"},[i("faicon",{staticClass:"icon",attrs:{icon:"caret-down"}})],1)])])},qi=[];i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("6b54");function Gi(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=Yi(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var s=0,a=function(){};return{s:a,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return o=t.done,t},e:function(t){r=!0,n=t},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw n}}}}function Yi(t,e){if(t){if("string"===typeof t)return Zi(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Zi(t,e):void 0}}function Zi(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var Ki={name:"ui-combobox",data:function(){return{list:{}}},props:{disabled:{default:!1},items:{},mclass:{default:null},mstyle:{default:null},value:{}},computed:{el_class:function(){var t={disabled:this.disabled};return null===this.mclass?t:Object.assign(def_style,this.mclass)},el_style:function(){return null===this.mstyle?{}:this.mstyle}},created:function(){this.list=[];var t,e=Gi(this.items);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.list.push({name:i,contents:null})}}catch(s){e.e(s)}finally{e.f()}},methods:{on_item_select:function(t){this.isel=t[0],this.$emit("input",this.isel)}}},Vi=Ki,Qi=(i("50a0"),Object(E["a"])(Vi,Xi,qi,!1,null,"41562dee",null)),ts=Qi.exports,es=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("div",{ref:"trigger",class:{enabled:t.enabled,hover:"hover"==t.trigger,click:"click"==t.trigger},attrs:{id:"trigger"},on:{click:function(e){return e.stopPropagation(),t.on_trigger_click(e)}}},[t._t("default"),i("ui-menu",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.on_click_outside,expression:"on_click_outside"}],style:t.menu_style,attrs:{id:"menu",items:t.items},on:{"item-selected":function(e){return t.on_item_selected(e)}}})],2)])},is=[],ss=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-menu",class:{"is-root":t.is_root},staticStyle:{"z-index":"1000"}},[i("div",{staticClass:"dmenu"},t._l(t.items,(function(e,s){return i("li",{key:s},[i("div",{staticClass:"item flex-row align-bl",on:{click:function(e){return e.stopPropagation(),t.item_clicked(s)}}},[i("span",[t._v(t._s(e.name))]),i("div",{staticClass:"expand"}),null!==e.contents?i("faicon",{staticClass:"icon",attrs:{icon:"caret-right"}}):t._e()],1),null!==e.contents?i("ui-menu",{attrs:{items:e.contents,is_root:!1},on:{"item-selected":function(e){return t.on_item_selected(e,s)}}}):t._e()],1)})),0)])},as=[],ns={name:"ui-menu",props:{items:{},is_root:{default:!0}},methods:{item_clicked:function(t){this.$emit("item-selected",[t])},on_item_selected:function(t,e){t.unshift(e),this.$emit("item-selected",t)}}},os=ns,rs=(i("2906"),Object(E["a"])(os,ss,as,!1,null,"37e9b2f2",null)),ls=rs.exports,cs=i("e67d"),hs=i.n(cs),us={name:"ui-dropdown",directives:{"click-outside":hs.a},data:function(){return{wtrigger:null,htrigger:null,wmenu:null,hmenu:null,enabled:!1}},props:{disabled:{default:!1},placement:{default:"bottom"},trigger:{default:"hover"},items:{}},computed:{menu_style:function(){return{"--menu-top":"".concat(this.htrigger,"px")}}},components:{"ui-menu":ls},methods:{on_item_selected:function(t){this.enabled=!1,this.$emit("item-selected",t)},on_trigger_click:function(){"click"!=this.trigger||this.disabled||(this.enabled=!this.enabled)},on_click_outside:function(){this.enabled=!1}},mounted:function(){var t=this;this.wtrigger=this.$refs.trigger.offsetWidth,this.htrigger=this.$refs.trigger.offsetHeight,"hover"==this.trigger&&this.$refs.trigger.addEventListener("mouseenter",(function(){t.enabled=!0}))}},ps=us,ds=(i("600d"),Object(E["a"])(ps,es,is,!1,null,"62b380c6",null)),fs=ds.exports,_s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{ref:"svg",style:t.svg_style,attrs:{viewBox:"0 0 120 120",height:t.height,fill:"currentColor"},on:{click:function(e){return t.$emit("click")},mousedown:function(e){return t.$emit("mousedown")}}},t._l(t.paths[t.icon],(function(t){return i("path",{attrs:{d:t}})})),0)},ms=[],vs={name:"ui-icon",data:function(){return{paths:{grid:["M20 10h10v100H20zM90 10h10v100H90z","M10 20h100v10H10zM10 90h100v10H10z"],terra5x1:["M50 10h20v100H50z"],terra4x3:["M30 20h60v80H30z"]}}},props:{icon:{},height:{default:"15px"},base:{default:!0,type:Boolean}},computed:{svg_style:function(){return{position:"relative",top:this.base?".125em":"0"}}}},bs=vs,gs=(i("3787"),Object(E["a"])(bs,_s,ms,!1,null,"2c8a693b",null)),xs=gs.exports,ws=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{"hover-hl":"all"===t.hl},on:{click:function(e){return t.$emit("click")}}},[i("span",{staticClass:"it-icon"},[i("faicon",{staticClass:"icon",class:{"hover-hl":"icon"===t.hl},attrs:{icon:t.icon}})],1),i("span",{staticClass:"it-text",class:{"hover-hl":"text"===t.hl}},[t._v(t._s(t.text))])])},ys=[],Os={name:"ui-icon-text",props:{icon:{},text:{},hl:{default:null}}},Cs=Os,ks=Object(E["a"])(Cs,ws,ys,!1,null,null,null),js=ks.exports,$s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("input",t._b({ref:"el",staticClass:"ui-input",class:t.el_class,style:t.el_style,attrs:{size:"1",spellcheck:"false"},domProps:{value:t.value},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.blur()},input:function(e){return t.$emit("input",e.target.value)},focus:function(e){return t.$emit("focus",e)},blur:function(e){return t.$emit("blur",e)}}},"input",t.$attrs,!1))},Ps=[],Es=(i("f386"),{name:"ui-input",inheritAttrs:!1,props:{value:{},small:{type:Boolean,default:!1},right:{type:Boolean,default:!1},mclass:{default:null},mstyle:{default:null}},computed:{el_class:function(){var t={small:this.small,right:this.right};return null===this.mclass?t:this.mclass},el_style:function(){return null===this.mstyle?{}:this.mstyle}},methods:{focus:function(){this.$refs.el.focus()},blur:function(){this.$refs.el.blur()}}}),Ss=Es,Ms=(i("fdea"),Object(E["a"])(Ss,$s,Ps,!1,null,"6c19ce85",null)),zs=Ms.exports,Ds=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-radio"},t._l(t.items,(function(e,s){return i("div",{key:s,staticClass:"flex-row align-bl",on:{click:function(e){return t.on_click(s)}}},[i("span",{staticClass:"inline-block"},[t.selected==s?i("faicon",{staticClass:"icon selected",attrs:{icon:"dot-circle"}}):i("faicon",{staticClass:"icon unselected",attrs:{icon:"circle"}})],1),i("span",[t._v(t._s(e))])])})),0)},Ts=[],As={name:"ui-radio",inheritAttrs:!1,data:function(){return{selected:0}},props:{items:{}},methods:{on_click:function(t){this.selected=t,this.$emit("clicked",this.selected)}}},Rs=As,Hs=(i("8540"),Object(E["a"])(Rs,Ds,Ts,!1,null,"d1ce615c",null)),Ls=Hs.exports,Fs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full"},[i("div",{ref:"splitter",staticClass:"ui-splitter",class:t.ui_class,style:t.ui_style},[i("div",{ref:"pane1",staticClass:"pane",attrs:{id:"pane1"}},[t._t("slot1")],2),i("div",{staticClass:"splitter"}),i("div",{staticClass:"pane",attrs:{id:"pane2"}},[t._t("slot2")],2)])])},Is=[],Ws=window.addEventListener,Bs=window.removeEventListener;function Ns(t,e){return"x"===t[t.length-1]?parseFloat(t):parseFloat(t)*e}var Us={name:"ui-splitter",data:function(){return{near:!1,resizing:!1,pane1_sz:"1fr",pane2_sz:"1fr",x:null,y:null}},props:{dir:{default:"horizontal"},limits:{default:function(){return[0,100]}},init1:{default:null},min1:{default:null},max1:{default:null},min2:{default:null},max2:{default:null},mode:{default:"C"}},computed:{ui_class:function(){return{horizontal:"horizontal"===this.dir,vertical:"vertical"===this.dir}},ui_style:function(){var t={display:"grid",width:"100%",height:"100%"},e="".concat(this.pane1_sz," 0px ").concat(this.pane2_sz);return"horizontal"===this.dir&&(t["grid-template-columns"]=e,this.near&&!this.resizing&&(t["cursor"]="ew-resize")),"vertical"===this.dir&&(t["grid-template-rows"]=e,this.near&&!this.resizing&&(t["cursor"]="ns-resize")),t}},methods:{ok_range:function(){var t=this.$refs.splitter,e="horizontal"===this.dir?t.offsetWidth:t.offsetHeight,i=null===this.min1?0:Ns(this.min1,e),s=null===this.max1?e-1:Ns(this.max1,e),a=null===this.min2?0:Ns(this.min2,e),n=null===this.max2?e-1:Ns(this.max2,e),o=Math.max(i,a),r=Math.min(s,n);if(r<o)return console.log("".concat(i," ").concat(s," ").concat(a," ").concat(n)),console.log("no acceptable position for splitter found"),null;if("B"===this.mode){var l=o;o=e-r,r=e-l}return[o,r]},on_mousemove:function(t){var e=this.$refs.splitter,i="horizontal"===this.dir?e.offsetWidth:e.offsetHeight,s=this.$refs.pane1,a=e.getBoundingClientRect(),n="horizontal"===this.dir?t.x-a.left:t.y-a.top,o="horizontal"===this.dir?s.offsetWidth:s.offsetHeight;this.near=Math.abs(n-o)<10;var r=this.ok_range();if(null!==r&&this.resizing)switch(n<r[0]&&(n=r[0]),n>r[1]&&(n=r[1]),this.mode){case"A":this.pane1_sz="".concat(n,"px"),this.pane2_sz="1fr";break;case"B":this.pane1_sz="1fr",this.pane2_sz="".concat(i-n,"px");break;case"C":this.pane1_sz="".concat(n/i,"fr"),this.pane2_sz="".concat(1-n/i,"fr");break}},on_mousedown:function(){this.near&&(this.resizing=!0,document.documentElement.style.cursor="grabbing",document.body.classList.add("no-pointer-events"),document.body.classList.add("non-selectable"))},on_mouseup:function(){this.resizing=!1,document.documentElement.style.cursor="",document.body.classList.remove("no-pointer-events"),document.body.classList.remove("non-selectable")}},mounted:function(){var t=this.ok_range();if(null!==t){var e=this.$refs.pane1,i="horizontal"===this.dir?e.offsetWidth:e.offsetHeight,s=this.$refs.splitter,a="horizontal"===this.dir?s.offsetWidth:s.offsetHeight;switch(i<t[0]&&(i=t[0]),i>t[1]&&(i=t[1]),this.mode){case"A":this.pane1_sz="".concat(i,"px"),this.pane2_sz="1fr";break;case"B":this.pane1_sz="1fr",this.pane2_sz="".concat(a-i,"px");break;case"C":this.pane1_sz="".concat(i/a,"fr"),this.pane2_sz="".concat(1-i/a,"fr");break}}},activated:function(){Ws("mousemove",this.on_mousemove),Ws("mouseup",this.on_mouseup),Ws("mousedown",this.on_mousedown)},deactivated:function(){Bs("mousemove",this.on_mousemove),Bs("mouseup",this.on_mouseup),Bs("mousedown",this.on_mousedown)}},Js=Us,Xs=(i("3a50"),Object(E["a"])(Js,Fs,Is,!1,null,"0ccfa99c",null)),qs=Xs.exports,Gs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-tabs"},t._l(t.tabs,(function(e,s){return i("div",{key:s,staticClass:"tab",class:{active:t.itab===s},on:{click:function(e){return t.on_click(s)}}},[i("div",{staticClass:"vcenter"},[i("span",{staticClass:"flex-row full-w align-bl"},[i("span",[t._v(t._s(e.name))]),i("div",{staticClass:"expand"}),i("faicon",{staticClass:"icon hover-hl pos-relative t-2px",attrs:{icon:"times-circle"},on:{click:function(e){return e.stopPropagation(),t.on_close(s)}}})],1)])])})),0)},Ys=[],Zs={name:"ui-tabs",props:{tabs:{default:function(){return[]}},itab:{default:0}},methods:{on_click:function(t){this.$emit("tab_changed",t)},on_close:function(t){this.$emit("tab_closed",t)}}},Ks=Zs,Vs=(i("34f5"),Object(E["a"])(Ks,Gs,Ys,!1,null,"50c7bc3f",null)),Qs=Vs.exports,ta=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("textarea",t._b({staticClass:"ui-textarea",attrs:{spellcheck:"false"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},"textarea",t.$attrs,!1))},ea=[],ia={name:"ui-textarea",inheritAttrs:!1,props:{value:{}}},sa=ia,aa=(i("960f"),Object(E["a"])(sa,ta,ea,!1,null,"3586da3c",null)),na=aa.exports,oa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"ui-tooltip"},[i("div",{ref:"trigger",staticStyle:{display:"inline-block"}},[t._t("default")],2),t.show?i("div",{ref:"popup",staticClass:"tooltip",style:t.popup_style},[t._v(t._s(t.text))]):t._e()])},ra=[],la={data:function(){return{show:!1,pos:{top:0,left:0},space:0,mouse_in:!1}},props:{text:"",placement:{default:"bottom"},trigger:{default:"hover"}},computed:{popup_style:function(){return{position:"absolute",top:"".concat(this.pos.top,"px"),left:"".concat(this.pos.left,"px")}}},methods:{set_popup_pos:function(){var t=this;this.$nextTick((function(){var e=t.$refs.trigger,i=t.$refs.popup,s=e.offsetWidth,a=e.offsetHeight,n=e.offsetLeft,o=e.offsetTop,r=i.offsetWidth,l=i.offsetHeight,c=(i.offsetLeft,i.offsetTop,0),h=0;switch(t.placement){case"top":h=n-r/2+s/2,c=o-l-t.space;break;case"top-left":h=n,c=o-l-t.space;break;case"top-right":h=n+s-r,c=o-l-t.space;break;case"left":h=n-r-t.space,c=o+a/2-l/2;break;case"left-top":h=n-r-t.space,c=o;break;case"left-bottom":h=n-r-t.space,c=o+a-l;break;case"right":h=n+s+t.space,c=o+a/2-l/2;break;case"right-top":h=n+s+t.space,c=o;break;case"right-bottom":h=n+s+t.space,c=o+a-l;break;case"bottom":h=n-r/2+s/2,c=o+a+t.space;break;case"bottom-left":h=n,c=o+a+t.space;break;case"bottom-right":h=n+s-r,c=o+a+t.space;break;default:h=n-r/2+s/2,c=o+a+t.space;break}t.pos.top=c,t.pos.left=h}))}},mounted:function(){var t=this,e=this.$refs.trigger;switch(this.trigger){case"click":e.addEventListener("click",(function(){t.show=!t.show,t.show&&t.set_popup_pos()})),e.addEventListener("mouseenter",(function(){t.mouse_in=!0})),e.addEventListener("mouseleave",(function(){t.mouse_in=!1}));break;case"hover":e.addEventListener("mouseenter",(function(){t.show=!0,t.set_popup_pos(),t.mouse_in=!0})),e.addEventListener("mouseleave",(function(){t.show=!1,t.mouse_in=!1}));break;case"hover-keep":e.addEventListener("mouseenter",(function(){t.show=!0,t.set_popup_pos(),t.mouse_in=!0})),e.addEventListener("mouseleave",(function(){t.mouse_in=!1}));break;case"focus":e.addEventListener("focus",(function(){t.show=!0,t.set_popup_pos()})),e.addEventListener("blur",(function(){t.show=!1}));break}}},ca={name:"ui-tooltip",mixins:[la],data:function(){return{space:4}},props:{trigger:{default:"hover"}}},ha=ca,ua=(i("5c92"),Object(E["a"])(ha,oa,ra,!1,null,"9be7a852",null)),pa=ua.exports,da=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-tree",style:t.ui_style},[i("div",{staticClass:"flex-row align-bl",attrs:{id:"root"}},[i("faicon",{staticClass:"icon hover-hl",staticStyle:{width:"12px","margin-right":"8px"},attrs:{icon:t.folder_icon},on:{click:t.on_icon_click}}),i("span",[t._v(t._s(t.root.name))])],1),t.root.is_folder&&t.root.is_open?i("div",{attrs:{id:"contents"}},[t._l(t.folders,(function(e){return i("div",{attrs:{id:"folder"}},[i("ui-tree",{attrs:{root:e,indent:t.indent+20}})],1)})),t._l(t.files,(function(e){return i("div",{attrs:{id:"file"}},[t._v(t._s(e.name))])}))],2):t._e()])},fa=[];function _a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function ma(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_a(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var va={name:"ui-tree",props:{root:{},indent:{default:0}},computed:{files:function(){return this.root.contents.filter((function(t){return!t.is_folder}))},folders:function(){return this.root.contents.filter((function(t){return t.is_folder}))},folder_icon:function(){return this.root.is_open?"folder-open":"folder"},ui_style:function(){var t={};return t["margin-left"]="".concat(this.indent,"px"),t}},methods:ma(ma({},Object(h["b"])(["toggle"])),{},{on_icon_click:function(){this.root.is_open=!this.root.is_open}})},ba=va,ga=(i("79e7"),Object(E["a"])(ba,da,fa,!1,null,"3e45744d",null)),xa=ga.exports,wa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-dialog"},[i("transition",{attrs:{name:"bg-fade"},on:{"after-leave":t.on_afterleave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"bg"})]),i("transition",{attrs:{name:"dialog-fade"},on:{"after-leave":t.on_afterleave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"dialog-box flex-col"},[i("div",{staticClass:"fixed pg",staticStyle:{"margin-bottom":"8px"}},[t._v(t._s(t.message))]),i("div",{staticClass:"flex-row align-bl"},[i("div",{staticClass:"expand"}),t._l(t.options,(function(e,s){return i("button",{key:s,staticClass:"dialog-button fixed",class:{highlighted:t.highlight===s},on:{click:function(e){return t.on_click(s)}}},[t._v(t._s(e))])}))],2)])])],1)},ya=[],Oa={name:"ui-dialog",inheritAttrs:!1,data:function(){return{message:"<no message provided>",options:["Cancel","Ok"],choice:null,callback:null,highlight:null,visible:!1,destroyed:!1}},methods:{on_afterleave:function(t){this.destroyed||(this.destroyed=!0,this.$destroy(!0),this.$el.parentNode.removeChild(this.$el),"function"===typeof this.callback&&this.callback(this.choice,this.options[this.choice]))},on_click:function(t){this.choice=t,this.visible=!1}}},Ca=Oa,ka=(i("4a4e"),Object(E["a"])(Ca,wa,ya,!1,null,"0193d76a",null)),ja=ka.exports,$a=s["a"].extend(ja),Pa=function(t){if(!s["a"].prototype.$isServer){t=t||{},"string"===typeof t&&(t={message:t,options:["Cancel","Ok"],highlight:1});var e=new $a({data:t});e.$mount(),document.body.appendChild(e.$el),e.visible=!0}},Ea=Pa,Sa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:t.fade_name},on:{"after-leave":t.on_afterleave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["ui-message"],style:t.style},[i("div",{staticClass:"flex-row"},[""!==t.type?i("faicon",{staticClass:"icon fixed",class:t.get_color(),attrs:{icon:t.get_icon()}}):t._e(),i("span",{staticClass:"fixed ml-8px pos-relative -t-2px -mb-2px"},[t._v(t._s(this.message))])],1)])])},Ma=[],za=(i("6762"),i("2fdb"),{name:"ui-input",inheritAttrs:!1,data:function(){return{message:"",type:"",position:"bottom",duration:2e3,on_close:null,visible:!1,ypos:0}},computed:{style:function(){return{top:"".concat(this.ypos,"px"),left:"50%"}},fade_name:function(){return["top","bottom"].includes(this.position)?"fade-".concat(this.position):""}},methods:{on_afterleave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},get_icon:function(){return{success:"check-circle",warning:"exclamation-circle",failure:"times-circle"}[this.type]},get_color:function(){return{success:"color-green",warning:"color-gold",failure:"color-red"}[this.type]}},mounted:function(){var t=this;this.timer=setTimeout((function(){null!==t.on_close&&t.on_close(),t.visible=!1}),this.duration)}}),Da=za,Ta=(i("3b07"),Object(E["a"])(Da,Sa,Ma,!1,null,"7399f516",null)),Aa=Ta.exports,Ra=s["a"].extend(Aa),Ha=[],La=[],Fa=1,Ia=10,Wa=function t(e){if(!s["a"].prototype.$isServer){e=e||{},"string"===typeof e&&(e={message:e});var i,a=Fa++,n=new Ra({data:e});n.id=a,n.on_close=function(){t.close(n)},n.$mount(),document.body.appendChild(n.$el);var o="top"===n.position?Ha:La;"top"===n.position?(i=Ia,o.forEach((function(t){i+=t.$el.offsetHeight+16}))):(i=window.innerHeight-Ia-34,o.forEach((function(t){i-=t.$el.offsetHeight+16}))),n.ypos=i,n.visible=!0,o.push(n)}};Wa.close=function(t){for(var e="top"===t.position?Ha:La,i=e.map((function(t){return t.id})).indexOf(t.id),s=e[i].$el.offsetHeight,a="top"===t.position?-1:1,n=i+1;n<e.length;n++)e[n].ypos+=a*(s+16);e.splice(i,1)};var Ba=Wa,Na=[Ji,ts,fs,xs,js,zs,Ls,qs,Qs,na,pa,xa],Ua=(new s["a"],function(t){Na.forEach((function(e){t.component(e.name,e)})),t.prototype.$dialog=Ea,t.prototype.$message=Ba}),Ja={install:Ua},Xa=i("ecee"),qa=i("c074"),Ga=i("b702"),Ya=i("ad3d");Xa["c"].add(qa["a"]),Xa["c"].add(qa["b"]),Xa["c"].add(qa["c"]),Xa["c"].add(qa["d"]),Xa["c"].add(qa["e"]),Xa["c"].add(qa["f"]),Xa["c"].add(qa["g"]),Xa["c"].add(qa["h"]),Xa["c"].add(qa["i"]),Xa["c"].add(qa["j"]),Xa["c"].add(qa["k"]),Xa["c"].add(qa["l"]),Xa["c"].add(qa["m"]),Xa["c"].add(Ga["a"]),Xa["c"].add(qa["n"]),Xa["c"].add(qa["o"]),Xa["c"].add(Ga["b"]),Xa["c"].add(qa["p"]),Xa["c"].add(qa["q"]),Xa["c"].add(qa["r"]),Xa["c"].add(qa["s"]),Xa["c"].add(qa["t"]),Xa["c"].add(qa["u"]),Xa["c"].add(qa["v"]),Xa["c"].add(qa["w"]),Xa["c"].add(qa["x"]),Xa["c"].add(qa["y"]),Xa["c"].add(qa["B"]),Xa["c"].add(qa["z"]),Xa["c"].add(qa["A"]),Xa["c"].add(qa["C"]),Xa["c"].add(qa["D"]),Xa["c"].add(qa["G"]),Xa["c"].add(qa["E"]),Xa["c"].add(qa["F"]),Xa["c"].add(qa["H"]),Xa["c"].add(qa["I"]),Xa["c"].add(qa["J"]),Xa["c"].add(qa["K"]),Xa["c"].add(qa["L"]),Xa["c"].add(qa["M"]),Xa["c"].add(qa["O"]),Xa["c"].add(qa["N"]),Xa["c"].add(qa["P"]),Xa["c"].add(qa["Q"]),Xa["c"].add(qa["R"]),Xa["c"].add(Ga["c"]),Xa["c"].add(qa["S"]),Xa["c"].add(qa["T"]),Xa["c"].add(qa["V"]),Xa["c"].add(Ga["d"]),Xa["c"].add(qa["U"]),Xa["c"].add(qa["W"]);var Za=Ya["a"];s["a"].use(Ja),s["a"].component("faicon",Za),s["a"].config.productionTip=!1,new s["a"]({store:Fi,render:function(t){return t(Li)}}).$mount("#app")},"5c92":function(t,e,i){"use strict";var s=i("c703"),a=i.n(s);a.a},"600d":function(t,e,i){"use strict";var s=i("9789"),a=i.n(s);a.a},"6bd5":function(t,e,i){},"6f7f":function(t,e,i){},"73d4":function(t,e,i){},"756a":function(t,e,i){},"79e7":function(t,e,i){"use strict";var s=i("e70c"),a=i.n(s);a.a},"82c9":function(t,e,i){"use strict";var s=i("33a4"),a=i.n(s);a.a},8373:function(t,e,i){},8540:function(t,e,i){"use strict";var s=i("0956"),a=i.n(s);a.a},"91d8":function(t,e,i){},9391:function(t,e,i){"use strict";var s=i("91d8"),a=i.n(s);a.a},"960f":function(t,e,i){"use strict";var s=i("73d4"),a=i.n(s);a.a},9789:function(t,e,i){},"99a6":function(t,e,i){},a1ed:function(t,e,i){},a3b7:function(t,e,i){"use strict";var s=i("31b6"),a=i.n(s);a.a},ab22:function(t,e,i){},b03a:function(t,e,i){"use strict";var s=i("ef64"),a=i.n(s);a.a},b675:function(t,e,i){"use strict";var s=i("0837"),a=i.n(s);a.a},bf68:function(t,e,i){},c703:function(t,e,i){},c72e:function(t,e,i){"use strict";var s=i("bf68"),a=i.n(s);a.a},ca8d:function(t,e,i){},d5a8:function(t,e,i){},dd95:function(t,e,i){"use strict";var s=i("756a"),a=i.n(s);a.a},e15e:function(t,e,i){},e6bf:function(t,e,i){"use strict";var s=i("a1ed"),a=i.n(s);a.a},e70c:function(t,e,i){},ef64:function(t,e,i){},fdea:function(t,e,i){"use strict";var s=i("ab22"),a=i.n(s);a.a}});
//# sourceMappingURL=app.f3f9bf1d.js.map